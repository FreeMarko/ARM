"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5882],{35882:function(e,r,t){t.d(r,{A3:function(){return x},GI:function(){return S},PU:function(){return E},UQ:function(){return P},e7:function(){return j},f0:function(){return Z},gc:function(){return O},gf:function(){return R},zD:function(){return D}});var n=t(59499),s=t(50029),a=t(87794),u=t.n(a),o=t(6240),c=t(48228),i=t(78945),p=t(96486),f=t(11163),d=t(67294),l=t(1458),m=t(97134),g=t(98924),w=t(42977),h=t(73471),y=t(98329),v=t(98919);function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function k(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var _="https://referme-backend.herokuapp.com",x=function(){var e,r=(0,y.ej)(m.FV),t=(0,w.a)().setSession,n=(0,f.useRouter)(),a=(0,h.L)().getUserProfile,b=(0,o.pm)(),x=(0,d.useRef)();return(0,c.D)((e=(0,s.Z)(u().mark(function e(n){var s,a,o,c,f;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.emailAddress,a=n.password,o=n.firstName,c=n.lastName,(0,v.L9)({category:l.Dy,action:l.zi}),x.current=b({description:"Signing up...",status:"loading"}),e.next=5,i.Z.post("".concat(_,"/signup/personal"),k({personal_email:s,password:a,first_name:o,last_name:c},(0,p.isNil)(r)||"undefined"===r?{}:{referred_by:r}));case 5:return f=e.sent.data,(0,v.hj)({personal_email:s,first_name:o,last_name:c}),(0,v.op)(s),(0,v.$n)({personal_email:s,email:s,first_name:o,last_name:c,account_type:"candidate"}),t(f.token),e.abrupt("return",f);case 12:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),{onError:function(e){b.update(x.current,{description:e.response.data.msg,status:"error"})},onSuccess:function(){a(),(0,v.WO)(l.zi),b.update(x.current,{description:"Welcome to refer.me",status:"success"}),n.push(g.Jt)}})},S=function(){var e,r=(0,o.pm)(),t=(0,f.useRouter)(),n=(0,d.useRef)(),a=(0,w.a)().setSession,b=(0,h.L)().getUserProfile;return(0,c.D)((e=(0,s.Z)(u().mark(function e(t){var s,o,c,f,d;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.emailAddress,o=t.password,c=t.company,f=(0,y.ej)(m.FV),(0,v.L9)({category:l.Dy,action:l.hf}),n.current=r({description:"Signing up...",status:"loading"}),e.next=6,i.Z.post("".concat(_,"/signup/referrer"),k({work_email:s,password:o,company:c},(0,p.isNil)(f)||"undefined"===f?{}:{referred_by:f}));case 6:return d=e.sent.data,(0,v.hj)({work_email:s,company:c}),(0,v.op)(s),(0,v.$n)({work_email:s,email:s,company:c,account_type:"referrer"}),a(d.token),e.abrupt("return",d);case 13:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),{onError:function(e){r.update(n.current,{description:e.response.data.msg,status:"error"})},onSuccess:function(){(0,v.WO)(l.hf),b(),r.update(n.current,{description:"Welcome to refer.me",status:"success"}),t.push(g.Jt)}})},Z=function(){var e,r=(0,o.pm)(),t=(0,f.useRouter)(),n=(0,d.useRef)(),a=(0,w.a)().setSession,p=(0,h.L)().getUserProfile;return(0,c.D)((e=(0,s.Z)(u().mark(function e(t){var s,o,c;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.email,o=t.password,n.current=r({description:"Logging In...",status:"loading"}),e.next=4,i.Z.post("".concat(_,"/login"),{email:s,password:o});case 4:return a((c=e.sent.data).token),(0,v.op)(s),e.abrupt("return",c);case 9:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),{onError:function(){r.update(n.current,{description:"Invalid credentials sent.",status:"error"})},onSuccess:function(){p(),t.push(g.h1),r.update(n.current,{description:"Logged In",status:"success"})}})},O=function(){var e=(0,o.pm)(),r=(0,d.useRef)();return(0,c.D)((0,s.Z)(u().mark(function t(){var n;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.current=e({description:"Sending email...",status:"loading"}),t.next=3,i.Z.post("".concat(_,"/resend_confirmation/work"));case 3:return n=t.sent.data,t.abrupt("return",n);case 6:case"end":return t.stop()}},t)})),{onError:function(t){e.update(r.current,{description:t.response.data.msg,status:"error"})},onSuccess:function(){e.update(r.current,{description:"Email sent! Check your inbox.",status:"success"})}})},E=function(){var e,r=(0,o.pm)(),t=(0,d.useRef)();return(0,c.D)((e=(0,s.Z)(u().mark(function e(n){var s,a,o,c,p,f;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.email,a=n.firstName,o=n.lastName,c=n.subject,p=n.message,t.current=r({description:"Sending email...",status:"loading"}),e.next=4,i.Z.post("".concat(_,"/contact_us"),{email:s,first_name:a,last_name:o,subject:c,message:p});case 4:return f=e.sent.data,e.abrupt("return",f);case 7:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),{onError:function(e){r.update(t.current,{description:e.response.data.msg,status:"error"})},onSuccess:function(){r.update(t.current,{description:"Email sent! We will be in touch shortly",status:"success"})}})},j=function(){var e=(0,o.pm)(),r=(0,d.useRef)();return(0,c.D)((0,s.Z)(u().mark(function t(){var n;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.current=e({description:"Sending email...",status:"loading"}),t.next=3,i.Z.post("".concat(_,"/resend_confirmation/personal"));case 3:return n=t.sent.data,t.abrupt("return",n);case 6:case"end":return t.stop()}},t)})),{onError:function(t){e.update(r.current,{description:t.response.data.msg,status:"error"})},onSuccess:function(){e.update(r.current,{description:"Email sent! Check your inbox.",status:"success"})}})},D=function(){var e,r,t=(0,o.pm)(),n=(0,w.a)().setSession,a=(0,d.useRef)(),p=(0,f.useRouter)();return(0,d.useEffect)(function(){a.current=t({description:"Confirming email...",status:"loading"})},[]),(0,c.D)((e=(0,s.Z)(u().mark(function e(r){var t,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.token,e.next=3,i.Z.post("".concat(_,"/confirm/").concat(t));case 3:return null!=(s=e.sent.data)&&s.token&&n(null==s?void 0:s.token),e.abrupt("return",s);case 7:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),{onError:function(e){t.update(a.current,{description:e.response.data.msg,status:"error"})},onSuccess:(r=(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,v.WO)(l.hB),t.update(a.current,{description:"Email confirmed! We will redirect your shortly",status:"success"}),p.push(g.Jt);case 3:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})})},R=function(){var e,r,t=(0,o.pm)(),n=(0,d.useRef)();return(0,c.D)((e=(0,s.Z)(u().mark(function e(r){var s,a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.email,n.current=t({description:"Sending your password reset email...",status:"loading"}),e.next=4,i.Z.post("".concat(_,"/send_password_reset_email"),{email:s});case 4:return a=e.sent.data,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),{onError:function(e){t.update(n.current,{description:e.response.data.msg,status:"error"})},onSuccess:(r=(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.update(n.current,{description:"Reset password email sent. Check your inbox!",status:"success"});case 1:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})})},P=function(){var e,r,t=(0,o.pm)(),n=(0,d.useRef)(),a=(0,f.useRouter)();return(0,c.D)((e=(0,s.Z)(u().mark(function e(r){var s,a,o;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.newPassword,a=r.token,n.current=t({description:"Sending your password reset email...",status:"loading"}),e.next=4,i.Z.post("".concat(_,"/update_password"),{token:a,new_password:s});case 4:return o=e.sent.data,e.abrupt("return",o);case 7:case"end":return e.stop()}},e)})),function(r){return e.apply(this,arguments)}),{onError:function(e){t.update(n.current,{description:e.response.data.msg,status:"error"})},onSuccess:(r=(0,s.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.update(n.current,{description:"Your password has been reset. Please log in in the sign in page.",status:"success"}),a.push(g.H4);case 2:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)})})}}}]);